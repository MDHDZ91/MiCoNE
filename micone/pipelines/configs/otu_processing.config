// -*- mode: groovy -*-

/*
* Reference for useful snippets:
    publishDir "${params.output_dir}/${f[0]}/${f[1]}/${f[2]}/${meta.id}",
        saveAs: { filename -> filename.split("/")[1] },
        mode: 'copy',
        overwrite: true

    String task_process = "${task.process}"
    f = getHierarchy(task_process)
*/

params {
    otu_processing {
        export {
            'biom2tsv' {}
        }
        transform {
            'group' {
                tax_levels = ['Phylum', 'Class', 'Order', 'Family', 'Genus', 'Species']
            }
            // NOTE: Set to "False" to disable filtering
            // NOTE: Set axis to "None" to disable normalization
            'normalize' {
                axis = "sample"
                count_thres = 500
                prevalence_thres = 0.05
                abundance_thres = 0.01
                rm_sparse_obs = "True"
                rm_sparse_samples = "True"
            }
        }
    }
}
